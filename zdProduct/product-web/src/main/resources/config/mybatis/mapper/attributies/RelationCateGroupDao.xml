<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zhaidou.product.attributies.dao.impl.RelationCateGroupDaoImpl">
	
	<resultMap type="RelationCateGroupModel" id="relationCateGroupModel">
		   <result property="id" column="id" javaType="java.lang.Long" />
		   <result property="groupId" column="group_id" javaType="java.lang.Long" />
		   <result property="groupCode" column="group_code" javaType="java.lang.String" />
		   <result property="categoryId" column="category_id" javaType="java.lang.Long" />
		   <result property="categoryCode" column="category_code" javaType="java.lang.String" />
	</resultMap>
	
    <insert id="insert" parameterType="RelationCateGroupModel" useGeneratedKeys="true" keyProperty="id">
		
		insert into  t_relation_cate_group
		(
	          			    group_id,
	          			    group_code,
	          			    category_id,
	          			    category_code
        )
		values
		(
	          			    #{groupId},
	          			    #{groupCode},
	          			    #{categoryId},
          				    #{categoryCode}
        )
	</insert>

	<update id="update" parameterType="RelationCateGroupModel">
		update  t_relation_cate_group t 
		  <set>
			         <if test="groupId != null  and groupId !=''">
				          t.group_id=#{groupId},
				    </if>
			         <if test="groupCode != null  and groupCode !=''">
				          t.group_code=#{groupCode},
				    </if>
			         <if test="categoryId != null  and categoryId !=''">
				          t.category_id=#{categoryId},
				    </if>
			         <if test="categoryCode != null  and categoryCode !=''">
				          t.category_code=#{categoryCode}
				    </if>
		    </set>
		where 
		t.id=#{id}
	</update>
	
	
	<delete id="delete" parameterType="java.lang.Long">
    	delete from  t_relation_cate_group  where id =#{id}
    </delete>
    
    <delete id="deleteModel" parameterType="RelationCateGroupModel">
    	delete from  t_relation_cate_group  where 1 = 1
    	 	<if test="groupId != null and groupId !=''">
					and group_id=#{groupId}
		    </if>
	        <if test="categoryId != null and categoryId !=''">
					and category_id=#{categoryId}
		    </if>
    </delete>
    
    <delete id="deleteByIds" parameterType="java.util.List">
    	delete from t_relation_cate_group  where 
    	id in
    	<foreach item="item" index="index" collection="list" open="(" separator="," close=")">
			#{item}
		</foreach>
    </delete>

    <delete id="deleteByGroupId" parameterType="java.lang.Integer">
    	delete from t_relation_cate_group  where 
    	group_id = #{groupId}
    </delete>
    
   
    
    <sql id="query">
	        <if test="id != null and id !=''">
					and t.id=#{id}
		    </if>
	        <if test="groupId != null and groupId !=''">
					and t.group_id=#{groupId}
		    </if>
	        <if test="groupCode != null and groupCode !=''">
		        	and t.group_code like CONCAT(CONCAT('%', #{groupCode}), '%') 
		    </if>
	        <if test="categoryId != null and categoryId !=''">
					and t.category_id=#{categoryId}
		    </if>
	        <if test="categoryCode != null and categoryCode !=''">
		        	and t.category_code like CONCAT(CONCAT('%', #{categoryCode}), '%') 
		    </if>
	    
    </sql>


	<select id="queryOne" parameterType="java.lang.Long"
	resultMap="relationCateGroupModel">
		select
		          id,
		          group_id,
		          group_code,
		          category_id,
		          category_code
		from  t_relation_cate_group t
		where t.id=#{id}
	</select>
	
	
	<select id="queryConditionList" parameterType="RelationCateGroupModel"
		resultMap="relationCateGroupModel">
		select 
	          id,
	    
	          group_id,
	    
	          group_code,
	    
	          category_id,
	    
	          category_code
	     from  t_relation_cate_group t
		 where 1=1
		<include refid="query"/>
	</select>
	
	
	<select id="queryListPage" parameterType="RelationCateGroupModel"
		resultMap="relationCateGroupModel">
		select 
	          id,
	    
	          group_id,
	    
	          group_code,
	    
	          category_id,
	    
	          category_code
	     from  t_relation_cate_group t
		 where 1=1
		<include refid="query"/>
	</select>

	<select id="countListPage" parameterType="RelationCateGroupModel"
		resultType="java.lang.Long">
		select count(1) from  t_relation_cate_group t
		where 1=1
		<include refid="query"/>
	 </select>




</mapper>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ProductLogDaoImpl">
	
	<resultMap type="ProductLogModel" id="productLogModel">
		   <result property="productLogId" column="product_log_id" javaType="java.lang.Long" />
		   <result property="productSkuId" column="product_sku_id" javaType="java.lang.Long" />
		   <result property="productCode" column="product_code" javaType="java.lang.String" />
		   <result property="productId" column="product_id" javaType="java.lang.Long" />
		   <result property="priductName" column="priduct_name" javaType="java.lang.String" />
		   <result property="type" column="type" javaType="java.lang.Long" />
		   <result property="attrName" column="attr_name" javaType="java.lang.String" />
		   <result property="oldValue" column="old_value" javaType="java.lang.String" />
		   <result property="newValue" column="new_value" javaType="java.lang.String" />
		   <result property="createTime" column="create_Time" javaType="java.sql.Date" />
		   <result property="createBy" column="create_by" javaType="java.lang.Long" />
		   <result property="userName" column="user_name" javaType="java.lang.String" />
	</resultMap>

    <sql id="query">
	        <if test="productLogId != null and productLogId !=''">
					and t.product_log_id=#{productLogId}
		    </if>
	        <if test="productSkuId != null and productSkuId !=''">
					and t.product_sku_id=#{productSkuId}
		    </if>
	        <if test="productCode != null and productCode !=''">
		        	and t.product_code like CONCAT(CONCAT('%', #{productCode}), '%') 
		    </if>
	        <if test="productId != null and productId !=''">
					and t.product_id=#{productId}
		    </if>
	        <if test="priductName != null and priductName !=''">
		        	and t.priduct_name like CONCAT(CONCAT('%', #{priductName}), '%') 
		    </if>
	        <if test="type != null and type !=''">
					and t.type=#{type}
		    </if>
	        <if test="attrName != null and attrName !=''">
		        	and t.attr_name like CONCAT(CONCAT('%', #{attrName}), '%') 
		    </if>
	        <if test="oldValue != null and oldValue !=''">
		        	and t.old_value like CONCAT(CONCAT('%', #{oldValue}), '%') 
		    </if>
	        <if test="newValue != null and newValue !=''">
		        	and t.new_value like CONCAT(CONCAT('%', #{newValue}), '%') 
		    </if>
	        <if test="createTime != null and createTime !=''">
					and t.create_Time=#{createTime}
		    </if>
	        <if test="createBy != null and createBy !=''">
					and t.create_by=#{createBy}
		    </if>
	        <if test="userName != null and userName !=''">
		        	and t.user_name like CONCAT(CONCAT('%', #{userName}), '%') 
		    </if>
	    
    </sql>


	<select id="queryOne" parameterType="java.lang.Long"
	resultMap="productLogModel">
	select
	          product_log_id,
	          product_sku_id,
	          product_code,
	          product_id,
	          priduct_name,
	          type,
	          attr_name,
	          old_value,
	          new_value,
	          create_Time,
	          create_by,
	          user_name
	from  t_product_log t
	where t.=
	</select>
	<select id="queryListPage" parameterType="ProductLogModel"
		resultMap="productLogModel">
		select 
	          product_log_id,
	    
	          product_sku_id,
	    
	          product_code,
	    
	          product_id,
	    
	          priduct_name,
	    
	          type,
	    
	          attr_name,
	    
	          old_value,
	    
	          new_value,
	    
	          create_Time,
	    
	          create_by,
	    
	          user_name
	     from  t_product_log t
		where 1=1
		<include refid="query"/>
		<if test="pageIndex != null  and pageIndex !=''">
			<if test="pageSize != null  and pageSize !=''">
				limit #{pageIndex},#{pageSize}
			</if>
		</if>
		<if test="pageIndex == null  or pageIndex ==''">
				limit 0,10
		</if>
	</select>

	<select id="countListPage" parameterType="ProductLogModel"
		resultType="java.lang.Long">
		select count(1) from  t_product_log t
		where 1=1
		<include refid="query"/>
	 </select>

	<insert id="insert" parameterType="ProductLogModel">
		<selectKey resultType="java.lang.Long" keyProperty="id" order="AFTER">
    		SELECT @@IDENTITY as id
    	</selectKey>
		insert into  t_product_log
		(
	          			    product_log_id,
	          			    product_sku_id,
	          			    product_code,
	          			    product_id,
	          				priduct_name
	          			    type,
	          			    attr_name,
	          			    old_value,
	          			    new_value,
	          			    create_Time,
	          			    create_by,
	          			user_name
        )
		values
		(
		          			    #{productLogId},
		          			    #{productSkuId},
		          			    #{productCode},
		          			    #{productId},
		          				#{priductName}
		          			    #{type},
		          			    #{attrName},
		          			    #{oldValue},
		          			    #{newValue},
		          			    now(),
		          			    #{createBy},
	          				#{userName}
        )
	</insert>

	<update id="update" parameterType="ProductLogModel">
		update  t_product_log t 
		  <set>
			         <if test="productLogId != null  and productLogId !=''">
				          t.product_log_id=#{productLogId},
				    </if>
			         <if test="productSkuId != null  and productSkuId !=''">
				          t.product_sku_id=#{productSkuId},
				    </if>
			         <if test="productCode != null  and productCode !=''">
				          t.product_code=#{productCode},
				    </if>
			         <if test="productId != null  and productId !=''">
				          t.product_id=#{productId},
				    </if>
			         <if test="priductName != null  and priductName !=''">
				          t.priduct_name=#{priductName},
				    </if>
			         <if test="type != null  and type !=''">
				          t.type=#{type},
				    </if>
			         <if test="attrName != null  and attrName !=''">
				          t.attr_name=#{attrName},
				    </if>
			         <if test="oldValue != null  and oldValue !=''">
				          t.old_value=#{oldValue},
				    </if>
			         <if test="newValue != null  and newValue !=''">
				          t.new_value=#{newValue},
				    </if>
			         <if test="createTime != null  and createTime !=''">
				          t.create_Time=#{createTime},
				    </if>
			         <if test="createBy != null  and createBy !=''">
				          t.create_by=#{createBy},
				    </if>
			         <if test="userName != null  and userName !=''">
				          t.user_name=#{userName}
				    </if>
		    </set>
		where 
		t.=
	</update>
	
	<delete id="delete" parameterType="java.lang.Long">
    	delete from  t_product_log  where  =
    </delete>
    
    <delete id="deleteByIds" parameterType="java.util.List">
    	delete from t_product_log  where 
    	 in
    	<foreach item="item" index="index" collection="list" open="(" separator="," close=")">
			#{item}
		</foreach>
    </delete>

</mapper>